<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2026 東京進名古屋出 - 6日獨旅企劃</title>
    
    <!-- 1. Tailwind CSS (Play CDN) - 依循要求使用 Tailwind -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- 2. Chart.js - 依循要求使用 Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- 3. Google Fonts - 提升質感 -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&display=swap" rel="stylesheet">
    
    <!-- 4. 內嵌 CSS (Embedded CSS) -->
    <style>
        /* 基本樣式設定 */
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: #f8f9fa; /* 淺色系背景 */
            color: #333;
        }
        
        /* 導覽列當前分頁的樣式 */
        .nav-link.active {
            font-weight: 700;
            color: #2563eb; /* Tailwind blue-600 */
            border-bottom: 2px solid #2563eb;
        }

        /* 每日行程的時間軸 (Timeline) 樣式 */
        .timeline-item {
            position: relative;
            padding-left: 2.5rem; /* 40px */
            padding-bottom: 2rem; /* 32px */
        }
        .timeline-item:last-child {
            padding-bottom: 0;
        }
        /* 時間軸的垂直線 */
        .timeline-item::before {
            content: '';
            position: absolute;
            left: 0.7rem; /* 11px */
            top: 0.25rem; /* 4px */
            bottom: 0;
            width: 2px;
            background-color: #d1d5db; /* gray-300 */
        }
        /* 時間軸的圓點 */
        .timeline-dot {
            position: absolute;
            left: 0;
            top: 0.125rem; /* 2px */
            width: 1.5rem; /* 24px */
            height: 1.5rem; /* 24px */
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 9999px; /* full */
            border: 3px solid #f8f9fa;
            background-color: #3b82f6; /* blue-500 */
            color: white;
            font-weight: 700;
            font-size: 0.75rem; /* 12px */
            z-index: 10;
        }
        .timeline-item:last-child::before {
            height: 0; /* 最後一個項目的線條停止 */
        }

        /* 打包清單互動樣式 */
        .pack-item input:checked + label {
            text-decoration: line-through;
            color: #9ca3af; /* gray-400 */
        }

        /* 響應式：手機版導覽列固定在底部 */
        @media (max-width: 768px) {
            body {
                padding-bottom: 60px; /* 為底部導覽列留出空間 */
            }
            .mobile-nav {
                display: flex;
                position: fixed;
                bottom: 0;
                left: 0;
                right: 0;
                background-color: white;
                box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
                z-index: 50;
                justify-content: space-around;
                padding-top: 8px;
                padding-bottom: 8px;
            }
            .mobile-nav-link {
                display: flex;
                flex-direction: column;
                align-items: center;
                font-size: 0.75rem; /* 12px */
                color: #6b7280; /* gray-500 */
                padding: 4px;
            }
            .mobile-nav-link.active {
                color: #2563eb; /* blue-600 */
                font-weight: 500;
            }
            .desktop-nav {
                display: none; /* 隱藏桌面版導覽列 */
            }
            
            /* 手機版導覽列項目過多時，調整字體大小 */
            .mobile-nav-link .text-xs {
                font-size: 0.65rem; /* 10px */
            }
        }
        @media (min-width: 769px) {
            .mobile-nav {
                display: none; /* 隱藏手機版導覽列 */
            }
            .desktop-nav {
                display: flex;
            }
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">

    <!-- 
      =================================
      Header & Navigation (Desktop)
      =================================
    -->
    <header class="desktop-nav sticky top-0 bg-white shadow-md z-40 w-full">
        <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
            <div class="text-xl font-bold text-blue-600">JAPAN TRIP 2026</div>
            <div class="flex space-x-6">
                <a href="#overview" class="nav-link text-gray-600 hover:text-blue-600 transition duration-300 px-2 py-1">行程總覽</a>
                <a href="#travel" class="nav-link text-gray-600 hover:text-blue-600 transition duration-300 px-2 py-1">交通住宿</a>
                <a href="#itinerary" class="nav-link text-gray-600 hover:text-blue-600 transition duration-300 px-2 py-1">每日行程</a>
                <a href="#food" class="nav-link text-gray-600 hover:text-blue-600 transition duration-300 px-2 py-1">美食地圖</a>
                <a href="#budget" class="nav-link text-gray-600 hover:text-blue-600 transition duration-300 px-2 py-1">預算分析</a>
                <a href="#packing" class="nav-link text-gray-600 hover:text-blue-600 transition duration-300 px-2 py-1">打包清單</a>
                <a href="#booking" class="nav-link text-gray-600 hover:text-blue-600 transition duration-300 px-2 py-1">預約總覽</a>
                <a href="#prep" class="nav-link text-gray-600 hover:text-blue-600 transition duration-300 px-2 py-1">行前準備</a>
            </div>
        </nav>
    </header>

    <!-- 
      =================================
      Main Content Area
      =================================
    -->
    <main class="container mx-auto p-4 md:p-8 max-w-7xl">

        <!-- 
          ======================
          Section 1: 行程總覽 (Overview)
          ======================
        -->
        <section id="overview" class="mb-16 scroll-mt-20">
            <h1 class="text-3xl md:text-4xl font-bold mb-4 text-gray-900">🚀 2026 東京進名古屋出：現代都市獨旅</h1>
            <p class="text-lg text-gray-600 mb-8">一份為您客製化的 6 日遊，專注於現代建築、潮流文化與高 CP 值美食的探索之旅。</p>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <!-- 總覽資訊 -->
                <div class="bg-white p-6 rounded-lg shadow-lg">
                    <h3 class="text-xl font-bold mb-4">旅程資訊</h3>
                    <ul class="space-y-3">
                        <li class="flex items-center"><span class="w-24 font-semibold">📅 日期</span>: 2026/1/12 (一) - 2026/1/17 (六)</li>
                        <li class="flex items-center"><span class="w-24 font-semibold">🧑‍✈️ 旅客</span>: 獨旅 (1人)</li>
                        <li class="flex items-center"><span class="w-24 font-semibold">✈️ 航班 (去)</span>: CX450 (TPE 12:50 -> NRT 16:50)</li>
                        <li class="flex items-center"><span class="w-24 font-semibold">✈️ 航班 (回)</span>: JL8671 (NGO 12:05 -> TPE 14:40)</li>
                        <li class="flex items-center"><span class="w-24 font-semibold">💰 預算</span>: TWD 60,000 (合理充裕)</li>
                        <li class="flex items-center"><span class="w-24 font-semibold">🏨 住宿</span>: Choice 集團 (點數兌換)</li>
                    </ul>
                </div>
                
                <!-- 交通比較圖 (Chart.js) -->
                <div class="bg-white p-6 rounded-lg shadow-lg">
                    <h3 class="text-xl font-bold mb-4">東京 → 名古屋 交通方式比較</h3>
                    <p class="text-sm text-gray-500 mb-4">基於您的「現代、效率」風格，**新幹線**是首選。</p>
                    <div class="relative h-72"> <!-- ** 修正：限制圖表高度 ** -->
                        <canvas id="transportChart"></canvas>
                    </div>
                </div>
            </div>
        </section>

        <!-- 
          ======================
          Section 2: 交通住宿 (Travel & Lodging)
          ======================
        -->
        <section id="travel" class="mb-16 scroll-mt-20">
            <h2 class="text-3xl font-bold mb-6 text-gray-900">🏨 交通與住宿規劃</h2>
            <p class="text-lg text-gray-600 mb-8">住宿已設定為使用 Choice 點數兌換，皆位於交通樞紐。</p>
            
            <div class="space-y-8">
                <!-- 東京住宿 -->
                <div class="bg-white rounded-lg shadow-lg overflow-hidden md:flex">
                    <div class="md:w-1/3 p-6 bg-blue-50 text-blue-800">
                        <h3 class="text-2xl font-bold">東京住宿 (4晚)</h3>
                        <p class="mt-1">1/12 (一) - 1/16 (五)</p>
                    </div>
                    <div class="md:w-2/3 p-6">
                        <h4 class="text-xl font-semibold">Comfort Hotel Tokyo Higashi Nihombashi</h4>
                        <p class="text-gray-600 mt-2">位於東日本橋，鄰近多條地鐵線 (淺草線、新宿線)。無論是從成田機場（搭乘京成 Access 特快）或是前往東京市區都非常方便。</p>
                        <a href="https://maps.google.com/?q=Comfort+Hotel+Tokyo+Higashi+Nihombashi" target="_blank" class="inline-block mt-4 text-blue-600 font-semibold hover:underline">
                            查看 Google Maps ➔
                        </a>
                    </div>
                </div>
                
                <!-- 名古屋住宿 -->
                <div class="bg-white rounded-lg shadow-lg overflow-hidden md:flex">
                    <div class="md:w-1/3 p-6 bg-green-50 text-green-800">
                        <h3 class="text-2xl font-bold">名古屋住宿 (1晚)</h3>
                        <p class="mt-1">1/16 (五) - 1/17 (六)</p>
                    </div>
                    <div class="md:w-2/3 p-6">
                        <h4 class="text-xl font-semibold">Comfort Hotel Central International Airport</h4>
                        <p class="text-gray-600 mt-2">位於中部國際機場 (NGO) 航廈旁。Day 5 晚上入住，Day 6 可睡飽後步行至航廈搭機，極度便利。</p>
                        <a href="https://maps.google.com/?q=Comfort+Hotel+Central+International+Airport" target="_blank" class="inline-block mt-4 text-blue-600 font-semibold hover:underline">
                            查看 Google Maps ➔
                        </a>
                    </div>
                </div>
            </div>
        </section>

        <!-- 
          ======================
          Section 3: 每日行程 (Daily Itinerary)
          ======================
        -->
        <section id="itinerary" class="mb-16 scroll-mt-20">
            <h2 class="text-3xl font-bold mb-8 text-gray-900">🗓️ 每日詳細行程</h2>
            
            <!-- Day 1 (1/12 一): 抵達東京 -->
            <div class="mb-12">
                <h3 class="text-2xl font-bold mb-4 text-blue-700">Day 1 (1/12 一): 抵達東京，初探都會</h3>
                <div class="relative">
                    <!-- Timeline Item 1 -->
                    <div class="timeline-item">
                        <div class="timeline-dot">1</div>
                        <h4 class="text-lg font-semibold mb-1">16:50 抵達成田 (NRT) & 入境</h4>
                        <p class="text-sm text-gray-500">預估 18:00 完成入境與提領行李</p>
                    </div>
                    <!-- Timeline Item 2 -->
                    <div class="timeline-item">
                        <div class="timeline-dot">2</div>
                        <h4 class="text-lg font-semibold mb-1">18:30 前往飯店</h4>
                        <p class="text-gray-600">搭乘「京成 Access 特快」直達「東日本橋站」，車程約 65 分鐘。出站即達飯店。</p>
                        <p class="text-sm text-blue-700 font-medium mt-2">
                            🚃 交通：[京成 Access 特快] (往羽田機場/西馬込方向)
                        </p>
                        <a href="https://www.google.com/maps/dir/Narita+Airport+Terminal+1+Station,+Japan/Comfort+Hotel+Tokyo+Higashi+Nihombashi,+Japan/" target="_blank" class="text-blue-600 hover:underline text-sm">
                            [地圖] NRT → 飯店 (建議路線)
                        </a>
                    </div>
                    <!-- Timeline Item 3 -->
                    <div class="timeline-item">
                        <div class="timeline-dot">3</div>
                        <h4 class="text-lg font-semibold mb-1">20:00 Check-in & 晚餐</h4>
                        <p class="text-gray-600">飯店安頓後，可至附近「人形町」區域探索。推薦 CP 值高的連鎖居酒屋（如：鳥貴族）或人氣拉麵店。</p>
                        <a href="https://maps.google.com/?q=Ningyocho+Gourmet" target="_blank" class="text-blue-600 hover:underline text-sm">
                            [地圖] 人形町美食區
                        </a>
                    </div>
                </div>
            </div>
            
            <!-- Day 2 (1/13 二): 潮流藝術 -->
            <div class="mb-12">
                <h3 class="text-2xl font-bold mb-4 text-blue-700">Day 2 (1/13 二): 潮流與現代藝術</h3>
                <div class="relative">
                    <div class="timeline-item">
                        <div class="timeline-dot">1</div>
                        <h4 class="text-lg font-semibold mb-1">13:00 午餐：原宿/表參道</h4>
                        <p class="text-gray-600">睡到自然醒後，直接前往原宿區域。可品嚐 CP 值高的午間套餐，如：AFURI 拉麵、Bills 鬆餅或 Kintan 燒肉午餐。</p>
                    </div>
                    <div class="timeline-item">
                        <div class="timeline-dot">2</div>
                        <h4 class="text-lg font-semibold mb-1">15:00 潮流中心：原宿 & 表參道</h4>
                        <p class="text-gray-600">先逛「竹下通」（年輕潮流），再到「表參道」欣賞安藤忠雄等大師的建築與精品店。建議停留 3 小時。</p>
                        <p class="text-sm text-blue-700 font-medium mt-2">
                            🚃 交通 (往原宿)：從「東日本橋站」搭 [都營淺草線] 至「新橋站」，轉乘 [JR 山手線] 至「原宿站」 (約 30 分鐘)。
                        </p>
                        <a href="https://maps.google.com/?q=Omotesando+Hills" target="_blank" class="text-blue-600 hover:underline text-sm">
                            [地圖] 表參道 Hills
                        </a>
                    </div>
                    <div class="timeline-item">
                        <div class="timeline-dot">3</div>
                        <h4 class="text-lg font-semibold mb-1">18:00 澀谷之夜：Shibuya SKY</h4>
                        <p class="text-gray-600">從表參道步行至澀谷 (約 15 分鐘)。登上 Shibuya SKY 俯瞰東京夜景與知名的「澀谷十字路口」。務必提前預訂日落時段。</p>
                        <a href="https://maps.google.com/?q=Shibuya+SKY" target="_blank" class="text-blue-600 hover:underline text-sm">
                            [地圖] Shibuya SKY
                        </a>
                    </div>
                    <div class="timeline-item">
                        <div class="timeline-dot">4</div>
                        <h4 class="text-lg font-semibold mb-1">20:00 晚餐：澀谷 Parco</h4>
                        <p class="text-gray-600">B1 的「CHAOS KITCHEN」匯集了各種現代、有趣的餐廳（如：米とサーカス），或選擇高人氣的壽司店（如：迴轉壽司 活）。</p>
                        <p class="text-sm text-gray-500 mt-2">
                            📌 備案：若 Shibuya SKY 訂不到，可改至澀谷 Parco 頂樓 (ROOF TOP PARK) 免費欣賞夜景。
                        </p>
                    </div>
                </div>
            </div>

            <!-- Day 3 (1/14 三): 銀座 & 新宿 -->
            <div class="mb-12">
                <h3 class="text-2xl font-bold mb-4 text-blue-700">Day 3 (1/14 三): 銀座 & 新宿探索</h3>
                <div class="relative">
                    <div class="timeline-item">
                        <div class="timeline-dot">1</div>
                        <h4 class="text-lg font-semibold mb-1">13:00 午餐：高 CP 值 Omakase (請預約)</h4>
                        <p class="text-gray-600">早上為自由時間。建議預約此時段享用「高 CP 值午間 Omakase」（如：銀座おのでら）。</p>
                        <p class="text-sm text-blue-700 font-medium mt-2">
                            🚃 交通 (往銀座)：從「東日本橋站」搭乘 [都營淺草線] 至「東銀座站」 (約 6 分鐘)，步行前往。
                        </p>
                        <a href="https://maps.google.com/?q=Sushi+Ginza+Onodera+Main+Branch" target="_blank" class="text-blue-600 hover:underline text-sm">
                            [地圖] 鮨 銀座おのでら
                        </a>
                    </div>
                    <div class="timeline-item">
                        <div class="timeline-dot">2</div>
                        <h4 class="text-lg font-semibold mb-1">15:00 銀座漫步</h4>
                        <p class="text-gray-600">飯後在銀座逛街，欣賞各大精品的櫥窗設計，可至「Ginza Six」頂樓花園或「Itoya」伊東屋文具。</p>
                    </div>
                    <div class="timeline-item">
                        <div class="timeline-dot">3</div>
                        <h4 class="text-lg font-semibold mb-1">17:00 新宿御苑</h4>
                        <p class="text-gray-600">在繁忙的都市中尋找片刻寧靜。現代化的溫室非常值得參觀。建議停留 1.5 小時 (注意冬季 16:30 最後入場)。</p>
                        <p class="text-sm text-blue-700 font-medium mt-2">
                            🚃 交通 (往新宿)：從「銀座站」搭乘 [東京 Metro 丸之內線] 至「新宿御苑前站」 (約 16 分鐘)。
                        </p>
                        <a href="https://maps.google.com/?q=Shinjuku+Gyoen+National+Garden" target="_blank" class="text-blue-600 hover:underline text-sm">
                            [地圖] 新宿御苑
                        </a>
                    </div>
                    <div class="timeline-item">
                        <div class="timeline-dot">4</div>
                        <h4 class="text-lg font-semibold mb-1">19:00 晚餐 & 新宿夜生活</h4>
                        <p class="text-gray-600">晚餐可選擇「思出橫丁」(Omoide Yokocho) 體驗昭和風情的串燒，餐後可至「黃金街」(Golden Gai) 體驗獨特的酒吧文化。</p>
                        <p class="text-sm text-gray-500 mt-2">
                            📌 備案 (雨天/舒適)：可改至「NEWoMan」商場的美食街 (FOOD HALL)，或「東急 Kabukicho Tower」的「食音橫丁」。
                        </p>
                        <a href="https://maps.google.com/?q=Omoide+Yokocho" target="_blank" class="text-blue-600 hover:underline text-sm">
                            [地圖] 思出橫丁
                        </a>
                    </div>
                </div>
            </div>

            <!-- Day 4 (1/15 四): 東京時尚漫步 -->
            <div class="mb-12">
                <h3 class="text-2xl font-bold mb-4 text-blue-700">Day 4 (1/15 四): 東京時尚漫步</h3>
                <div class="relative">
                    <div class="timeline-item">
                        <div class="timeline-dot">1</div>
                        <h4 class="text-lg font-semibold mb-1">12:30 午餐 & 代官山</h4>
                        <p class="text-gray-600">睡到自然醒後，前往「代官山」。這裡有許多時尚的早午餐 (Brunch) 或咖啡廳（如：IVY PLACE）。</p>
                        <p class="text-sm text-blue-700 font-medium mt-2">
                            🚃 交通 (往代官山)：從「東日本橋站」搭 [都營淺草線] 至「人形町站」，轉乘 [東京 Metro 日比谷線] 至「中目黑站」，再轉 [東急東橫線] 至「代官山站」 (約 35 分鐘)。
                        </p>
                    </div>
                    <div class="timeline-item">
                        <div class="timeline-dot">2</div>
                        <h4 class="text-lg font-semibold mb-1">14:00 代官山 蔦屋書店 (T-SITE)</h4>
                        <p class="text-gray-600">必訪的景點。由 Klein Dytham architecture 設計，是全球最美的書店之一。光是建築和空間本身就值得花 2 小時細細品味。</p>
                        <a href="https://maps.google.com/?q=Daikanyama+T-SITE" target="_blank" class="text-blue-600 hover:underline text-sm">
                            [地圖] 代官山 T-SITE
                        </a>
                    </div>
                    <div class="timeline-item">
                        <div class="timeline-dot">3</div>
                        <h4 class="text-lg font-semibold mb-1">16:30 中目黑 漫步</h4>
                        <p class="text-gray-600">從代官山步行至「中目黑」。沿著目黑川兩岸有許多設計師小店、二手古著店和咖啡廳。必訪「星巴克臻選®東京烘焙工坊」。</p>
                        <a href="https://maps.google.com/?q=Starbucks+Reserve+Roastery+Tokyo" target="_blank" class="text-blue-600 hover:underline text-sm">
                            [地圖] 星巴克臻選®東京烘焙工坊
                        </a>
                    </div>
                    <div class="timeline-item">
                        <div class="timeline-dot">4</div>
                        <h4 class="text-lg font-semibold mb-1">19:00 晚餐：惠比壽</h4>
                        <p class="text-gray-600">從中目黑搭 1 站地鐵至「惠比壽」。推薦「惠比壽橫丁」體驗熱鬧的居酒屋氛圍，或選擇高 CP 值的「AFURI」柚子鹽拉麵總本店。</p>
                        <p class="text-sm text-gray-500 mt-2">
                            📌 備案 (雨天)：可直接至「惠比壽花園廣場」，欣賞歐式建築，並在其商場內用餐。
                        </p>
                        <a href="https://maps.google.com/?q=Ebisu+Yokocho" target="_blank" class="text-blue-600 hover:underline text-sm">
                            [地圖] 惠比壽橫丁
                        </a>
                    </div>
                </div>
            </div>

            <!-- Day 5 (1/16 五): 移動日 & 名古屋精華遊 -->
            <div class="mb-12">
                <h3 class="text-2xl font-bold mb-4 text-green-700">Day 5 (1/16 五): 移動日 & 名古屋精華遊</h3>
                <div class="relative">
                    <div class="timeline-item">
                        <div class="timeline-dot">1</div>
                        <h4 class="text-lg font-semibold mb-1">10:00 Check-out & 前往名古屋</h4>
                        <p class="text-gray-600">早上可稍作休息。從飯店出發至「東京車站」，搭乘東海道新幹線 (Nozomi) 前往名古屋。車程約 1.5 小時。</p>
                        <p class="text-sm text-blue-700 font-medium mt-2">
                            🚃 交通 (往東京站)：從「馬喰橫山站」搭 [都營新宿線] 至「神保町站」，轉 [東京 Metro 半藏門線] 至「大手町站」，步行至東京車站 (約 20 分鐘)。或搭計程車 (約 10-15 分鐘)。
                        </p>
                    </div>
                    <div class="timeline-item">
                        <div class="timeline-dot">2</div>
                        <h4 class="text-lg font-semibold mb-1">12:30 抵達名古屋 & 午餐</h4>
                        <p class="text-gray-600">抵達名古屋車站。先在車站內寄放大型行李 (使用 COIN LOCKER)。午餐可在車站樓上的「JR Central Towers」美食街解決，或品嚐名古屋名物「Kishimen」(棊子麵)。</p>
                    </div>
                    <div class="timeline-item">
                        <div class="timeline-dot">3</div>
                        <h4 class="text-lg font-semibold mb-1">14:00 榮 (Sakae) 地區：現代建築巡禮</h4>
                        <p class="text-gray-600">參觀「Oasis 21」(綠洲21) 的未來感「水之宇宙船」，並登上「中部電力 MIRAI TOWER」(舊名古屋電視塔) 欣賞市景。</p>
                        <p class="text-sm text-blue-700 font-medium mt-2">
                            🚃 交通 (往榮)：從「名古屋站」搭 [地鐵東山線] 至「榮站」 (約 5 分鐘)。
                        </p>
                        <a href="https://maps.google.com/?q=Oasis+21,+Sakae,+Nagoya,+Japan" target="_blank" class="text-blue-600 hover:underline text-sm">
                            [地圖] Oasis 21
                        </a>
                    </div>
                    <div class="timeline-item">
                        <div class="timeline-dot">4</div>
                        <h4 class="text-lg font-semibold mb-1">17:00 大須商店街</h4>
                        <p class="text-gray-600">名古屋的「秋葉原」與「原宿」綜合體。這裡有二手古著、電子產品和各種小吃，展現了名古屋的多元文化。建議停留 1.5 小時。</p>
                        <p class="text-sm text-blue-700 font-medium mt-2">
                            🚃 交通 (往大須)：從「榮站」搭 [地鐵名城線] 至「上前津站」 (約 4 分鐘)。
                        </p>
                        <a href="https://maps.google.com/?q=Osu+Kannon+Street" target="_blank" class="text-blue-600 hover:underline text-sm">
                            [地圖] 大須商店街
                        </a>
                    </div>
                    <div class="timeline-item">
                        <div class="timeline-dot">5</div>
                        <h4 class="text-lg font-semibold mb-1">19:00 晚餐：(高 CP 值高級餐) 鰻魚飯三吃</h4>
                        <p class="text-gray-600">品嚐名古屋的靈魂美食「Hitsumabushi」。推薦名店「あつた蓬莱軒 (Atsuta Houraiken)」，可至松坂屋店 (位於榮地區)。</p>
                        <a href="https://maps.google.com/?q=Atsuta+Houraiken+Matsuzakaya" target="_blank" class="text-blue-600 hover:underline text-sm">
                            [地圖] あつた蓬莱軒 (松坂屋店)
                        </a>
                    </div>
                    <div class="timeline-item">
                        <div class="timeline-dot">6</div>
                        <h4 class="text-lg font-semibold mb-1">21:00 前往機場飯店 Check-in</h4>
                        <p class="text-gray-600">返回「名古屋車站」取行李。接著從「名鐵名古屋站」搭乘「μ-SKY (ミュースカイ)」指定席列車，最快 28 分鐘直達「中部國際機場站」。步行至飯店 Check-in。</p>
                        <a href="https://www.google.com/maps/dir/Meitetsu+Nagoya+Station,+Nagoya,+Aichi,+Japan/Comfort+Hotel+Central+International+Airport/" target="_blank" class="text-blue-600 hover:underline text-sm">
                            [地圖] 名古屋站 → 機場飯店
                        </a>
                    </div>
                </div>
            </div>

            <!-- Day 6 (1/17 六): 輕鬆歸途 -->
            <div class="mb-12">
                <h3 class="text-2xl font-bold mb-4 text-gray-700">Day 6 (1/17 六): 輕鬆歸途</h3>
                <div class="relative">
                    <div class="timeline-item">
                        <div class="timeline-dot">1</div>
                        <h4 class="text-lg font-semibold mb-1">09:00 飯店早餐 & Check-out</h4>
                        <p class="text-gray-600">睡到自然醒。在 Comfort Hotel 享用免費早餐，整理行李並辦理退房。</p>
                    </div>
                    <div class="timeline-item">
                        <div class="timeline-dot">2</div>
                        <h4 class="text-lg font-semibold mb-1">10:00 步行至航廈 & 辦理登機</h4>
                        <p class="text-gray-600">從飯店悠閒步行至第一航廈 (T1)。辦理 JAL 登機手續、托運行李。</p>
                    </div>
                    <div class="timeline-item">
                        <div class="timeline-dot">3</div>
                        <h4 class="text-lg font-semibold mb-1">12:05 啟程回家 (JL8671)</h4>
                        <p class="text-gray-600">NGO 12:05 → TPE 14:40。旅途愉快！</p>
                    </div>
                </div>
            </div>

        </section>

        <!-- 
          ======================
          Section 4: 美食地圖 (Food Map)
          ======================
        -->
        <section id="food" class="mb-16 scroll-mt-20">
            <h2 class="text-3xl font-bold mb-6 text-gray-900">🍔 美食地圖 (高 CP 值推薦)</h2>
            <p class="text-lg text-gray-600 mb-6">精選符合「高 CP 值」或「獨特體驗」的美食 (含備案)。</p>

            <!-- 互動篩選器 -->
            <div class="flex flex-wrap gap-2 mb-6" id="food-filter-buttons">
                <button class="food-filter-btn active bg-blue-600 text-white px-4 py-2 rounded-full font-semibold text-sm transition" data-filter="all">全部 (8)</button>
                <button class="food-filter-btn bg-gray-200 text-gray-700 px-4 py-2 rounded-full font-semibold text-sm transition" data-filter="tokyo">東京 (5)</button>
                <button class="food-filter-btn bg-gray-200 text-gray-700 px-4 py-2 rounded-full font-semibold text-sm transition" data-filter="nagoya">名古屋 (3)</button>
                <button class="food-filter-btn bg-gray-200 text-gray-700 px-4 py-2 rounded-full font-semibold text-sm transition" data-filter="main">正餐 (6)</button>
                <button class="food-filter-btn bg-gray-200 text-gray-700 px-4 py-2 rounded-full font-semibold text-sm transition" data-filter="snack">體驗 (2)</button>
            </div>

            <!-- 美食卡片列表 -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="food-card-container">
                
                <!-- 1. 鰻魚飯 -->
                <div class="food-card bg-white rounded-lg shadow-lg overflow-hidden transition-all" data-category="nagoya main">
                    <div class="p-6">
                        <span class="text-xs font-semibold uppercase text-red-600">名古屋 | 必吃正餐</span>
                        <h4 class="text-xl font-bold mt-2 mb-2">あつた蓬莱軒 (Atsuta Houraiken)</h4>
                        <p class="text-gray-600 text-sm mb-4">鰻魚飯三吃的創始名店。一份套餐的多重享受，是高價但 CP 值極高的美食體驗。</p>
                        <a href="https://maps.google.com/?q=Atsuta+Houraiken+Matsuzakaya" target="_blank" class="font-semibold text-blue-600 hover:underline">
                            地圖 (松坂屋店) ➔
                        </a>
                    </div>
                </div>
                
                <!-- 2. Omakase (午餐) -->
                <div class="food-card bg-white rounded-lg shadow-lg overflow-hidden transition-all" data-category="tokyo main">
                    <div class="p-6">
                        <span class="text-xs font-semibold uppercase text-blue-600">東京 | CP值高級餐</span>
                        <h4 class="text-xl font-bold mt-2 mb-2">鮨 銀座おのでら (Onodera)</h4>
                        <p class="text-gray-600 text-sm mb-4">米其林星級壽司。晚餐昂貴，但「午間套餐」能以相對實惠的價格體驗高品質的江戶前壽司。</p>
                        <a href="https://maps.google.com/?q=Sushi+Ginza+Onodera+Main+Branch" target="_blank" class="font-semibold text-blue-600 hover:underline">
                            地圖 (銀座本店) ➔
                        </a>
                    </div>
                </div>

                <!-- 3. 燒肉 (午餐) -->
                <div class="food-card bg-white rounded-lg shadow-lg overflow-hidden transition-all" data-category="tokyo main">
                    <div class="p-6">
                        <span class="text-xs font-semibold uppercase text-blue-600">東京 | CP值高級餐</span>
                        <h4 class="text-xl font-bold mt-2 mb-2">焼肉 Kintan (表參道)</h4>
                        <p class="text-gray-600 text-sm mb-4">時尚的燒肉店，適合獨旅。推薦「午間和牛套餐」，CP 值高，肉質優良，用餐環境現代舒適。</p>
                        <a href="https://maps.google.com/?q=Yakiniku+Kintan+Omotesando" target="_blank" class="font-semibold text-blue-600 hover:underline">
                            地圖 (表參道店) ➔
                        </a>
                    </div>
                </div>

                <!-- 4. 味噌豬排 -->
                <div class="food-card bg-white rounded-lg shadow-lg overflow-hidden transition-all" data-category="nagoya main">
                    <div class="p-6">
                        <span class="text-xs font-semibold uppercase text-red-600">名古屋 | 特色正餐</span>
                        <h4 class="text-xl font-bold mt-2 mb-2">矢場とん (Yabaton)</h4>
                        <p class="text-gray-600 text-sm mb-4">名古屋味噌豬排的代表。濃郁的紅味噌醬汁淋在剛炸好的豬排上，非常下飯。 (可作為鰻魚飯備案)</p>
                        <a href="https://maps.google.com/?q=Yabaton+Sakae" target="_blank" class="font-semibold text-blue-600 hover:underline">
                            地圖 (榮店) ➔
                        </a>
                    </div>
                </div>

                <!-- 5. 居酒屋 -->
                <div class="food-card bg-white rounded-lg shadow-lg overflow-hidden transition-all" data-category="tokyo snack">
                    <div class="p-6">
                        <span class="text-xs font-semibold uppercase text-blue-600">東京 | 獨特體驗</span>
                        <h4 class="text-xl font-bold mt-2 mb-2">思出橫丁 (Omoide Yokocho)</h4>
                        <p class="text-gray-600 text-sm mb-4">新宿的「回憶小巷」。在煙霧瀰漫的窄巷中吃串燒、喝啤酒，體驗最道地的昭和氛圍。</p>
                        <a href="https://maps.google.com/?q=Omoide+Yokocho" target="_blank" class="font-semibold text-blue-600 hover:underline">
                            地圖 ➔
                        </a>
                    </div>
                </div>
                
                <!-- 6. 喫茶店 -->
                <div class="food-card bg-white rounded-lg shadow-lg overflow-hidden transition-all" data-category="nagoya snack">
                    <div class="p-6">
                        <span class="text-xs font-semibold uppercase text-red-600">名古屋 | 獨特體驗</span>
                        <h4 class="text-xl font-bold mt-2 mb-2">コメダ珈琲店 (Komeda's Coffee)</h4>
                        <p class="text-gray-600 text-sm mb-4">名古屋早餐文化的代表。早上點咖啡「送」烤吐司和水煮蛋。可體驗不同於東京的悠閒步調。</p>
                        <a href="https://maps.google.com/?q=Komeda's+Coffee+Nagoya+Station" target="_blank" class="font-semibold text-blue-600 hover:underline">
                            地圖 (車站周邊) ➔
                        </a>
                    </div>
                </div>
                
                <!-- 7. (備案) 炸豬排 -->
                <div class="food-card bg-white rounded-lg shadow-lg overflow-hidden transition-all" data-category="tokyo main">
                    <div class="p-6">
                        <span class="text-xs font-semibold uppercase text-blue-600">東京 | 正餐備案</span>
                        <h4 class="text-xl font-bold mt-2 mb-2">とんかつ 檍 (Aoki)</h4>
                        <p class="text-gray-600 text-sm mb-4">高檔炸豬排店。若 Omakase 沒訂到，可改吃這個。以實惠價格品嚐到高品質的「林 SPF 豬肉」。</p>
                        <a href="https://maps.google.com/?q=Tonkatsu+Aoki+Ginza" target="_blank" class="font-semibold text-blue-600 hover:underline">
                            地圖 (銀座店) ➔
                        </a>
                    </div>
                </div>

                <!-- 8. (備案) 天婦羅 -->
                <div class="food-card bg-white rounded-lg shadow-lg overflow-hidden transition-all" data-category="tokyo main">
                    <div class="p-6">
                        <span class="text-xs font-semibold uppercase text-blue-600">東京 | 正餐備案</span>
                        <h4 class="text-xl font-bold mt-2 mb-2">天丼 金子半之助 (Kaneko Hannosuke)</h4>
                        <p class="text-gray-600 text-sm mb-4">CP 值爆表的天丼名店。以平實價格享用滿滿一碗的豐盛天婦羅 (穴子魚、蝦、半熟蛋等)。</p>
                        <a href="https://maps.google.com/?q=Kaneko+Hannosuke+Nihonbashi" target="_blank" class="font-semibold text-blue-600 hover:underline">
                            地圖 (日本橋本店) ➔
                        </a>
                    </div>
                </div>

            </div>
        </section>

        <!-- 
          ======================
          Section 5: 預算分析 (Budget)
          ======================
        -->
        <section id="budget" class="mb-16 scroll-mt-20">
            <h2 class="text-3xl font-bold mb-6 text-gray-900">💰 預算分析 (總預算: TWD 60,000)</h2>
            <p class="text-lg text-gray-600 mb-8">已更新為機票/住宿點數兌換版。我們將總預算調整至 TWD 60,000，這仍為您保留了 <strong>TWD 22,000</strong> 的彈性購物/預備金。</p>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-center">
                <!-- 預算圓餅圖 -->
                <div class="bg-white p-6 rounded-lg shadow-lg">
                    <h3 class="text-xl font-bold mb-4 text-center">預算結構 (TWD)</h3>
                    <div class="relative h-72 md:h-80">
                        <canvas id="budgetChart"></canvas>
                    </div>
                </div>

                <!-- 預算明細表 -->
                <div class="bg-white p-6 rounded-lg shadow-lg">
                    <h3 class="text-xl font-bold mb-4">估算明細</h3>
                    <div class="overflow-x-auto">
                        <table class="w-full text-left">
                            <thead class="bg-gray-50 border-b border-gray-200">
                                <tr>
                                    <th class="py-3 px-4 font-semibold text-sm text-gray-600">項目</th>
                                    <th class="py-3 px-4 font-semibold text-sm text-gray-600">預估 (TWD)</th>
                                    <th class="py-3 px-4 font-semibold text-sm text-gray-600">備註</th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-gray-100">
                                <tr>
                                    <td class="py-4 px-4 font-medium">✈️ 機票</td>
                                    <td class="py-4 px-4">3,500</td>
                                    <td class="py-4 px-4 text-sm text-gray-500">里程票稅金 (HKD279+TWD2197)</td>
                                </tr>
                                <tr>
                                    <td class="py-4 px-4 font-medium">🏨 住宿 (5晚)</td>
                                    <td class="py-4 px-4">0</td>
                                    <td class="py-4 px-4 text-sm text-gray-500">Choice 點數兌換 (4+1 晚)</td>
                                </tr>
                                <tr>
                                    <td class="py-4 px-4 font-medium">🚄 交通</td>
                                    <td class="py-4 px-4">6,000</td>
                                    <td class="py-4 px-4 text-sm text-gray-500">含新幹線、機場交通、地鐵</td>
                                </tr>
                                <tr>
                                    <td class="py-4 px-4 font-medium">🍣 餐飲</td>
                                    <td class="py-4 px-4">26,500</td>
                                    <td class="py-4 px-4 text-sm text-gray-500">(約 4,400/日) 含 Omakase, 鰻魚飯</td>
                                </tr>
                                <tr>
                                    <td class="py-4 px-4 font-medium">🎫 景點門票</td>
                                    <td class="py-4 px-4">2,000</td>
                                    <td class="py-4 px-4 text-sm text-gray-500">Shibuya SKY, MIRAI TOWER等</td>
                                </tr>
                                <tr>
                                    <td class="py-4 px-4 font-medium text-blue-600">🛍️ 預備金/購物</td>
                                    <td class="py-4 px-4 font-bold text-blue-600">22,000</td>
                                    <td class="py-4 px-4 text-sm text-gray-500">彈性運用 (佔 37%)</td>
                                </tr>
                                <tr class="bg-gray-50">
                                    <td class="py-4 px-4 font-bold"><strong>總計</strong></td>
                                    <td class="py-4 px-4 font-bold"><strong>60,000</strong></td>
                                    <td class="py-4 px-4 text-sm text-gray-500"></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </section>

        <!-- 
          ======================
          Section 6: 互動打包清單 (Packing List)
          ======================
        -->
        <section id="packing" class="mb-16 scroll-mt-20">
            <h2 class="text-3xl font-bold mb-6 text-gray-900">🧳 互動打包清單</h2>
            <div class="bg-white p-6 rounded-lg shadow-lg">
                <div class="flex justify-between items-center mb-4">
                    <div class="w-full bg-gray-200 rounded-full h-4">
                        <div id="packing-progress" class="bg-blue-500 h-4 rounded-full text-xs font-medium text-blue-100 text-center p-0.5 leading-none" style="width: 0%">0%</div>
                    </div>
                    <button id="reset-packing-btn" class="ml-4 text-sm text-gray-500 hover:text-red-500 whitespace-nowrap">重設清單</button>
                </div>
                
                <div id="packing-list-container" class="grid grid-cols-1 md:grid-cols-3 gap-x-8">
                    <!-- 類別 1: 重要文件 -->
                    <div class="mb-4">
                        <h3 class="text-lg font-semibold mb-2 border-b pb-1">重要文件</h3>
                        <div class="space-y-2">
                            <div class="pack-item"><input type="checkbox" id="pack-1" class="mr-2"><label for="pack-1">護照</label></div>
                            <div class="pack-item"><input type="checkbox" id="pack-2" class="mr-2"><label for="pack-2">機票/住宿憑證 (APP)</label></div>
                            <div class="pack-item"><input type="checkbox" id="pack-3" class="mr-2"><label for="pack-3">日圓現金</label></div>
                            <div class="pack-item"><input type="checkbox" id="pack-4" class="mr-2"><label for="pack-4">信用卡</label></div>
                        </div>
                    </div>
                    <!-- 類別 2: 電子產品 -->
                    <div class="mb-4">
                        <h3 class="text-lg font-semibold mb-2 border-b pb-1">電子產品</h3>
                        <div class="space-y-2">
                            <div class="pack-item"><input type="checkbox" id="pack-5" class="mr-2"><label for="pack-5">手機 & 充電線</label></div>
                            <div class="pack-item"><input type="checkbox" id="pack-6" class="mr-2"><label for="pack-6">行動電源</label></div>
                            <div class="pack-item"><input type="checkbox" id="pack-7" class="mr-2"><label for="pack-7">e-SIM (或 Wi-Fi 機)</label></div>
                            <div class="pack-item"><input type="checkbox" id="pack-8" class="mr-2"><label for="pack-8">耳機</label></div>
                        </div>
                    </div>
                    <!-- 類別 3: 衣物與日常 -->
                    <div class="mb-4">
                        <h3 class="text-lg font-semibold mb-2 border-b pb-1">衣物與日常 (1月冬季)</h3>
                        <div class="space-y-2">
                            <div class="pack-item"><input type="checkbox" id="pack-9" class="mr-2"><label for="pack-9">保暖大衣 (防風)</label></div>
                            <div class="pack-item"><input type="checkbox" id="pack-10" class="mr-2"><label for="pack-10">發熱衣 / 保暖內層</label></div>
                            <div class="pack-item"><input type="checkbox" id="pack-11" class="mr-2"><label for="pack-11">毛衣 / 衛衣</label></div>
                            <div class="pack-item"><input type="checkbox" id="pack-12" class="mr-2"><label for="pack-12">圍巾、毛帽、手套</label></div>
                            <div class="pack-item"><input type="checkbox" id="pack-13" class="mr-2"><label for="pack-13">個人藥品</label></div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- 
          ======================
          Section 7: 預約總覽 (Booking Summary)
          ======================
        -->
        <section id="booking" class="mb-16 scroll-mt-20">
            <h2 class="text-3xl font-bold mb-6 text-gray-900">🔔 預約總覽</h2>
            <p class="text-lg text-gray-600 mb-6">以下是此行程中建議（或必須）提前預約的項目，請務必在出發前確認完成。</p>
            
            <div class="bg-white p-6 rounded-lg shadow-lg overflow-x-auto">
                <table class="w-full text-left">
                    <thead class="bg-gray-50 border-b border-gray-200">
                        <tr>
                            <th class="py-3 px-4 font-semibold text-sm text-gray-600">項目</th>
                            <th class="py-3 px-4 font-semibold text-sm text-gray-600">類型</th>
                            <th class="py-3 px-4 font-semibold text-sm text-gray-600">預計日期</th>
                            <th class="py-3 px-4 font-semibold text-sm text-gray-600">備註 (與連結)</th>
                        </tr>
                    </thead>
                    <tbody class="divide-y divide-gray-100">
                        <tr>
                            <td class="py-4 px-4 font-medium">Shibuya SKY</td>
                            <td class="py-4 px-4">景點</td>
                            <td class="py-4 px-4">Day 2 (1/13) 傍晚</td>
                            <td class="py-4 px-4 text-sm text-gray-500">
                                務必提前預訂日落時段。
                                <a href="https://www.shibuya-scramble-square.com/sky/" target="_blank" class="text-blue-600 hover:underline ml-2">[官網]</a>
                            </td>
                        </tr>
                        <tr>
                            <td class="py-4 px-4 font-medium">鮨 銀座おのでら<br>(Sushi Ginza Onodera)</td>
                            <td class="py-4 px-4">餐飲</td>
                            <td class="py-4 px-4">Day 3 (1/14) 13:00</td>
                            <td class="py-4 px-4 text-sm text-gray-500">
                                高 CP 值 Omakase。
                                <strong class="text-red-600">(請務必重新預約 1/14-1/16 時段)</strong>
                                <a href="https://onodera-group.com/ginza/" target="_blank" class="text-blue-600 hover:underline ml-2">[官網]</a>
                            </td>
                        </tr>
                        <tr>
                            <td class="py-4 px-4 font-medium">あつた蓬莱軒<br>(Atsuta Houraiken)</td>
                            <td class="py-4 px-4">餐飲</td>
                            <td class="py-4 px-4">Day 5 (1/16) 晚餐</td>
                            <td class="py-4 px-4 text-sm text-gray-500">
                                鰻魚飯名店，排隊人潮多，建議預約 (松坂屋店較易預約)。
                                <a href="http://www.houraiken.com/" target="_blank" class="text-blue-600 hover:underline ml-2">[官網]</a>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>

        <!-- 
          ======================
          Section 8: 行前準備 (Preparation)
          ======================
        -->
        <section id="prep" class="scroll-mt-20">
            <h2 class="text-3xl font-bold mb-6 text-gray-900">📋 行前準備清單</h2>
            <div class="bg-white p-6 rounded-lg shadow-lg">
                <ul class="space-y-4 list-disc list-inside text-gray-700">
                    <li><strong>[重要] 重新預約:</strong> 由於日期已更改，請務必重新確認/預約 Day 3 的 Omakase。</li>
                    <li><strong>網路 (e-SIM/Wi-Fi):</strong> 建議購買 e-SIM 卡，落地即用，方便獨旅。</li>
                    <li><strong>交通卡 (Suica/ICOCA):</strong> 準備一張交通 IC 卡 (iPhone 可直接加入 Apple Wallet)。</li>
                    <li><strong>日圓現金:</strong> 準備部分現金，用於小額支付或傳統店家 (如思出橫丁)。</li>
                    <li><strong>天氣 (1月):</strong> 東京與名古屋 1 月均溫約 2-10°C，偏乾冷。注意保暖，特別是參觀夜景時。</li>
                    <li><strong>APP 下載:</strong> 建議下載「國泰航空」、「Choice Hotels」以便應變；下載「Japan Wi-Fi & ANA」等 APP 以取得免費熱點。</li>
                    <li><strong>電壓與插座:</strong> 日本電壓 100V，插座為兩扁腳 (與台灣相同)。</li>
                </ul>
            </div>
        </section>

    </main>
    
    <!-- 
      =================================
      Footer
      =================================
    -->
    <footer class="text-center p-6 mt-12 border-t border-gray-200">
        <p class="text-sm text-gray-500">
            此為 Gemini AI 根據您的需求客製化生成的行程網頁。<br>
            Travel Plan & Web App by Gemini (2025).
        </p>
    </footer>

    <!-- 
      =================================
      Navigation (Mobile)
      =================================
    -->
    <nav class="mobile-nav" id="mobile-nav-bar">
        <a href="#overview" class="mobile-nav-link active">
            <span><!-- Icon Placeholder --></span>
            <span class="text-xs">總覽</span>
        </a>
        <a href="#travel" class="mobile-nav-link">
            <span><!-- Icon Placeholder --></span>
            <span class="text-xs">交通</span>
        </a>
        <a href="#itinerary" class="mobile-nav-link">
            <span><!-- Icon Placeholder --></span>
            <span class="text-xs">行程</span>
        </a>
        <a href="#food" class="mobile-nav-link">
            <span><!-- Icon Placeholder --></span>
            <span class="text-xs">美食</span>
        </a>
        <a href="#budget" class="mobile-nav-link">
            <span><!-- Icon Placeholder --></span>
            <span class="text-xs">預算</span>
        </a>
        <a href="#packing" class="mobile-nav-link">
            <span><!-- Icon Placeholder --></span>
            <span class="text-xs">打包</span>
        </a>
        <a href="#booking" class="mobile-nav-link">
            <span><!-- Icon Placeholder --></span>
            <span class="text-xs">預約</span>
        </a>
        <a href="#prep" class="mobile-nav-link">
            <span><!-- Icon Placeholder --></span>
            <span class="text-xs">準備</span>
        </a>
    </nav>


    <!-- 
      =================================
      Embedded JavaScript
      =================================
    -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {

            // === 1. Chart.js 交通比較圖 ===
            const transportCtx = document.getElementById('transportChart').getContext('2d');
            new Chart(transportCtx, {
                type: 'bar',
                data: {
                    labels: ['新幹線 (Nozomi)', '高速巴士', '在來線 (Local)'],
                    datasets: [
                        {
                            label: '時間 (小時)',
                            data: [1.5, 5.5, 8], // 單位：小時
                            backgroundColor: 'rgba(59, 130, 246, 0.7)', // blue-500
                            borderColor: 'rgba(59, 130, 246, 1)',
                            borderWidth: 1,
                            yAxisID: 'yTime',
                        },
                        {
                            label: '費用 (JPY)',
                            data: [11300, 5000, 8500], // 單位：日圓
                            backgroundColor: 'rgba(16, 185, 129, 0.7)', // emerald-500
                            borderColor: 'rgba(16, 185, 129, 1)',
                            borderWidth: 1,
                            yAxisID: 'yCost',
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        tooltip: {
                            mode: 'index',
                            intersect: false,
                        }
                    },
                    scales: {
                        yTime: {
                            type: 'linear',
                            display: true,
                            position: 'left',
                            title: {
                                display: true,
                                text: '時間 (小時)'
                            },
                            grid: {
                                drawOnChartArea: false, // 只顯示 yTime 的網格
                            },
                        },
                        yCost: {
                            type: 'linear',
                            display: true,
                            position: 'right',
                            title: {
                                display: true,
                                text: '費用 (JPY)'
                            },
                            grid: {
                                drawOnChartArea: false, // 隱藏 yCost 的網格
                            },
                        }
                    }
                }
            });

            // === 2. Chart.js 預算圓餅圖 ===
            const budgetCtx = document.getElementById('budgetChart').getContext('2d');
            new Chart(budgetCtx, {
                type: 'doughnut',
                data: {
                    labels: ['機票', '住宿', '交通', '餐飲', '景點門票', '預備金/購物'],
                    datasets: [{
                        label: '預算 (TWD)',
                        data: [3500, 0, 6000, 26500, 2000, 22000],
                        backgroundColor: [
                            '#3b82f6', // blue-500
                            '#ef4444', // red-500
                            '#f97316', // orange-500
                            '#10b981', // emerald-500
                            '#8b5cf6', // violet-500
                            '#06b6d4'  // cyan-500
                        ],
                        hoverOffset: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                padding: 15
                            }
                        }
                    }
                }
            });

            // === 3. 美食地圖篩選 (Food Map Filter) ===
            const filterButtons = document.querySelectorAll('.food-filter-btn');
            const foodCards = document.querySelectorAll('.food-card');

            filterButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const filter = button.dataset.filter;
                    
                    // 更新按鈕樣式
                    filterButtons.forEach(btn => {
                        btn.classList.remove('active', 'bg-blue-600', 'text-white');
                        btn.classList.add('bg-gray-200', 'text-gray-700');
                    });
                    button.classList.add('active', 'bg-blue-600', 'text-white');
                    button.classList.remove('bg-gray-200', 'text-gray-700');

                    // 篩選卡片
                    foodCards.forEach(card => {
                        const categories = card.dataset.category.split(' ');
                        if (filter === 'all' || categories.includes(filter)) {
                            card.style.display = 'block';
                        } else {
                            card.style.display = 'none';
                        }
                    });
                });
            });

            // === 4. 導覽列平滑滾動 & 狀態追蹤 (Smooth Scroll & Active State) ===
            const sections = document.querySelectorAll('section[id]');
            const navLinks = document.querySelectorAll('.nav-link, .mobile-nav-link');
            
            // 點擊滾動
            navLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const targetId = link.getAttribute('href');
                    const targetElement = document.querySelector(targetId);
                    if (targetElement) {
                        targetElement.scrollIntoView({
                            behavior: 'smooth',
                            block: 'start'
                        });
                        
                        // (用於手機版) 點擊後手動更新一次狀態
                        updateActiveLink(targetId);
                    }
                });
            });

            // 滾動時偵測
            const observerOptions = {
                root: null,
                rootMargin: '0px',
                threshold: 0.4 // 40% 進入視窗時觸發
            };

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const targetId = '#' + entry.target.id;
                        updateActiveLink(targetId);
                    }
                });
            }, observerOptions);

            sections.forEach(section => {
                observer.observe(section);
            });

            // 更新導覽列 Active 樣式
            function updateActiveLink(activeId) {
                navLinks.forEach(link => {
                    link.classList.remove('active');
                    if (link.getAttribute('href') === activeId) {
                        link.classList.add('active');
                    }
                });
                
                // 特別處理手機版 (因為有兩個導覽列)
                const mobileLinks = document.querySelectorAll('.mobile-nav-link');
                mobileLinks.forEach(link => {
                    link.classList.remove('active');
                    if (link.getAttribute('href') === activeId) {
                        link.classList.add('active');
                    }
                });
            }
            
            // === 5. 互動打包清單 (Packing List) ===
            const packingItems = document.querySelectorAll('#packing-list-container input[type="checkbox"]');
            const totalItems = packingItems.length;
            const progressBar = document.getElementById('packing-progress');
            const resetButton = document.getElementById('reset-packing-btn');

            function updateProgress() {
                const checkedItems = document.querySelectorAll('#packing-list-container input[type="checkbox"]:checked').length;
                const percentage = totalItems > 0 ? Math.round((checkedItems / totalItems) * 100) : 0;
                
                progressBar.style.width = percentage + '%';
                progressBar.textContent = percentage + '%';
            }

            packingItems.forEach(item => {
                item.addEventListener('change', updateProgress);
            });

            resetButton.addEventListener('click', () => {
                packingItems.forEach(item => {
                    item.checked = false;
                });
                updateProgress();
            });

            // 初始化進度條
            updateProgress();

        });
    </script>
</body>
</html>

